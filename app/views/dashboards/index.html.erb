<h2 class="text-center"><%= "Hi #{@user.username} !" %></h2>
<%# <%= @dashboard_media.mediable.time_reading %>
<%# <%= @user.available_time %>

<%# <p class="text-center"><%= "#{current_user.available_time} minutes de lecture" </p> %>

<!--Carousel Wrapper-->
<div id="multi-item-example" class="carousel slide carousel-multi-item" data-ride="carousel">

    <%# -----------First slide category -------------- %>
<% ar = [] %> <%# Initialize un array vide qui va contenir les categories de l'user sous forme de 3 array  %>

  <% @user_categories.each do |user_categorie| %> <%#Iterer sur les categories de l'user  %>
    <% ar << user_categorie.category %> <%# Stocke les categories dans un array  %>
  <% end %>
  <%er = ar.join(",").split(",").uniq %> <%# Transformation des arrays en un seul et supression des doublons  %>

  <% first_category_slide = ar.first %> <%# Selectionne le premier element pour afficher le slider avec la class active  %>


  <!--Slides-->
  <% if ar.count == 1 %> <%# Si user à qu'une seule catégorie, alors afficher suelement cette categorie  %>
  <!--Controls-->
  <div class="controls-top">
    <a class="btn-floating" href="#multi-item-example" data-slide="prev"><i class="fas fa-chevron-left"></i></a>
    <%= ar.join("") %>
    <a class="btn-floating" href="#multi-item-example" data-slide="next"><i class="fas fa-chevron-right"></i></a>
  </div>
  <!--/.Controls-->
  <div class="carousel-inner" role="listbox">
    <!--First slide-->
    <div class="carousel-item active">
      <div class="card-container-home">
        <div class="card-product">
          <img src="https://source.unsplash.com/daily?news" />
          <div class="card-product-infos">
            <div class="card-product-title">
              <h6><%= Article.first.category %></h6>
              <h2><%= Article.first.title %></h2>
            </div>
            <div class="card-product-content">
              <p><%=Article.first.content %></p>
            </div>
            <footer class="blockquote-footer"><cite title="Source Title"><%= "Le Monde"%></cite></footer>
            <div class="card-product-bouton"><%= link_to "Je Decouvre", class: "btn btn-outline success", :target => "_blank" %></div>
          </div>
        </div>
      </div>
    </div>
    <!--/.First slide-->

  <% else %>
    <%# --------Other slide category -le premier ----------- %>
    <% other_categories_slide = [] %> <%# Initialisation d'un array vide pour stocker %>
    <% other_first_slide = er.first %> <%# Isolement du premier element pour pouvoir crer une nouvelle colonnes  %>
<div class="controls-top">
    <a class="btn-floating" href="#multi-item-example" data-slide="prev"><i class="fas fa-chevron-left"></i></a>

    <a class="btn-floating" href="#multi-item-example" data-slide="next"><i class="fas fa-chevron-right"></i></a>
  </div>

    <div class="carousel-item active">

      <div class="col-md-3" style="float:left">
       <div class="card mb-2">
          <img class="card-img-top"
            src="https://mdbootstrap.com/img/Photos/Horizontal/City/4-col/img%20(60).jpg" alt="Card image cap">
          <div class="card-body">
            <h4 class="card-title"><%= other_first_slide %></h4>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
              card's content.</p>
            <a class="btn btn-primary">Button</a>
          </div>
        </div>
      </div>
    </div>
    <!--/.First slide-->

    <% er.delete(er.first) %> <%# Prend les categories de l'user et supprime le premier car deja utilisé plus haut %>
    <% other_categories_slide = er %> <%# Contient les categories sauf le premier  %>

    <% other_categories_slide.each do |category| %> <%# Iteration sur les categories restants pour crer les autres colonnes du carousel  %>

    <!--Other slide-->
     <div class="carousel-item">

      <div class="col-md-3" style="float:left">
        <div class="card mb-2">
          <img class="card-img-top"
            src="https://mdbootstrap.com/img/Photos/Horizontal/City/4-col/img%20(60).jpg" alt="Card image cap">
          <div class="card-body">
            <h4 class="card-title"><%= category %></h4>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the cards content.</p>
            <a class="btn btn-primary">Button</a>
          </div>
        </div>
      </div>
    </div>

    <!--/.Other slide-->
    <% end %>

  <% end %>
